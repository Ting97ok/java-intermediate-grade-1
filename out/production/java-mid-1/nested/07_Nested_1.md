# 7. Nested_1

- 중첩 클래스, 내부 클래스
    - 클래스 안에 클래스를 정의하는 것
    - 중첩 클래스는 정의하는 위치에 따라 구분
        - 정적 중첩 클래스(static)
        - 내부 클래스(non-static)
            - 내부 클래스
            - 지역 클래스
            - 익명 클래스
    - 클래스 선언 위치
        - 정적 중첩 클래스 - 정적 변수와 같은 위치 → 앞에 static이 붙어있음
        - 내부 클래스 - 인스턴스 변수와 같은 위치 → 앞에 static이 붙지 않음
        - 지역 클래스 - 지역 변수와 같은 위치 → 코드 블럭 안에서 정의된 클래스
        - 익명 클래스 - 지역 클래스와 동일
    - 중첩, 내부 ?
        - 중첩 : 바깥 클래스 안에 있지만 바깥 클래스와 전혀 상관 없는 클래스 → 바깥 인스턴스에 소속되지 않음.
        - 내부 : 바깥 클래스를 구성하는 클래스 → 바깥 인스턴스에 소속됨
    - 내부 클래스
        - 내부 클래스 (inner class) : 바깥 클래스의 인스턴스의 멤버에 접근
        - 지역 클래스(local class) : 내부 클래스의 특징 + 지역 변수에 접근
        - 익명 클래스(anonymous class) : 지역 클래스의 특징 + 클래스의 이름이 없는 특별한 클래스
    - 용어 정리
        - 중첩 클래스 : 정적 중첩 클래스 + 내부 클래스 종류 모두 포함
        - 정적 중첩 클래스 : 정적 중첩 클래스
        - 내부 클래스 : 내부 클래스, 지역 클래스, 익명 클래스를 포함
    - 참고
        - 실무에서는 구분하지 않고 중첩 또는 내부 클래스라고 말함. → 원래는 static이라고 붙은 클래스는 내부 클래스 라고 말하면 안됨. 다만 개발자들은 굳이 구분해서 말하지 않음. 상황에 따라 알아서 알아들어야함…
    - 사용하는 이유
        - 논리적 그룹화 : 특정 클래스가 하나의 클래스에서만 사용될 경우 바깥에 있는 것보다 해당 클래스 안에 포함되는게 더 논리 그룹화에 맞음. 또한 패키지를 열었을때 다른 곳에서 사용되지 않는 클래스들은 외부에 노출되지 않음.
        - 캡슐화 : 중첩 클래스는 내부 클래스의 private 에 접근이 가능하기 때문에 불필요한 public 이 사라짐.
    - 상황
        - 중첩 클래스는 특정 클래스가 다른 하나의 클래스 안에서만 사용되거나, 둘이 아주 긴밀하게 연결되어 있는 특별한 경우에만 사용해야 함. 외부 여러곳에서 특정 클래스를 사용한다면 중첩 클래스로 사용하면 안됨.
        - 중첩 클래스(내부 클래스 포함)는 보통 자신이 소속된 바깥 클래스에서 사용되는 것이다. 즉 외부의 다른 클래스에서 선언하고 있다면 그건 중첩 클래스가 아닌 밖으로 클래스를 생성하는게 더 좋은 선택 일 수 있다.
- 중첩 클래스
    - 특징
        - 클래스 앞에 static이 붙는다 → 정적으로 어디서든 사용 가능
        - 바깥 클래스의 인스턴스 멤버에는 접근 불가능 → 참조할 수 있는 값이 없음
        - 바깥 클래스의 static에는 당연히 접근 가능 → 다른 클래스와 다른점은 private 일때도 접근이 가능함.
        - 추가..
            - static으로 선언되었기 때문에 독립적 / 즉 바깥 클래스가 없어도 생성이 될 수 있기 때문에 바깥 클래스의 참조값을 보관하지 않음 → 인스턴스 접근 불가능!!
    - 정적 중첩 클래스는 그냥 중첩했을 뿐 바깥 클래스와의 아무런 관계가 없음!! → 그냥 클래스 두개 만든 것과 다름이 없지만 바깥 클래스의 private static 에 접근이 가능하다는 차이가 있음.
    - A 클래스를 B 클래스 에서만 사용한다고 가정했을때 중첩 클래스가 아니라면 A클래스, B클래스 따로따로 생성을 해야한다. 추후 다른 개발자가 볼때는 이러한 클래스를 모두 확인해야 파악이 가능하다. → 중첩 클래스를 사용한다면 B클래스 내부에 A 클래스를 사용하여 중첩을 했을 경우에는 하나의 클래스에서 한눈에 파악이 가능하다 (이때 private를 사용하면 더 확실하게 인식 가능!!)
    - 정적 중첩 클래스는 바깥클래스.내부클래스 로 선언이 가능하다.
- 내부 클래스
    - 특징
        - static이 붙지 않아 바깥 인스턴스의 소속됨
        - 독립적으로 생성되지 않으므로 바깥 클래스가 선언 된 후 해당 참조값으로 선언되어야 함. → 바깥 인스턴스 참조값 보관.
            - 그러므로 바깥 인스턴스 멤버에도 접근이 가능
            - 선언시 바깥클래스의 인스턴스 참조.new 내부클래스() 처럼 선언되어야 함.
    - 내부 클래스의 생성
        - 개념
            - 바깥 클래스의 인스턴스 내부에서 내부 클래스의 인스턴스가 생성
                - 내부 인스턴스는 바깥 인스턴스를 알기 때문에 바깥 인스턴스의 멤버에 접근 가능
        - 실제
            - 내부 인스턴스는 바깥 인스턴스의 참조를 보관 → 이 참조를 통해 바깥 인스턴스의 멤버에 접근 가능
    - 서로 다른 두 클래스에서 get 메서드를 사용하려면 public 으로 생성을 해야한다. 그러나 내부 클래스를 사용한다면 public 메서드를 만들 필요 없이 해당 인스턴스를 참조해서 사용하면 된다.
        - 내부 클래스가 아닌 경우에는 A 클래스의 a1, a2 인스턴스를 public getter 해서 B클래스에서 사용해야한다.
        - A클래스의 내부클래스로 B클래스를 작성한다면 public 할 필요 없이 해당 인스턴스의 접근이 가능하다.
    - 추가..
        - 논리적 그룹화, 캡슐화 등으로 인한 중첩클래스, 내부클래스를 사용할때 외부 클래스의 인스턴스 자원을 사용하지 않는다면 불필요한 객체참조를 피할 수 있고 명확한 책임분리, 메모리 효율성 등의 이유로 내부 클래스가 아닌 정적 중첩 클래스 사용을 권장함.
- Shadowing
    - 다른 변수들을 가려서 보이지 않게 하는 것을 섀도잉이라고 함.
        - 인스턴스의 참조를 사용하면 외부 변수에 접근할 수 있음
        - this.value는 내부 클래스 인스턴스 접근, 바깥클래스이름.this.value는 바깥 클래스의 인스턴스에 접근
    - 프로그래밍에서 가장 중요한 것은 명확성이다. 처음부터 이름을 서로 다르게 지어서 명확하게 구분하는 것이 더 나은 방법.